"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function updateQueryStringParameter(e,t,n){var a=new RegExp("([?&])"+t+"=.*?(&|$)","i"),r=-1!==e.indexOf("?")?"&":"?";return e.match(a)?e.replace(a,"$1"+t+"="+n+"$2"):e+r+t+"="+n}var lictencat_handle_enable_toggle=function(e,t,n){e.preventDefault();t.parentNode.parentNode.parentNode.querySelector(".column-listencat_count"),t.parentNode.parentNode.parentNode.querySelector(".column-listencat_time");var i=t.parentNode;i.classList.add("loading");var l=t.checked;jQuery(document).ready(function(e){var t={action:"listencat_convert_post_ajax",enable:l,id:n};jQuery.post(ajaxurl,t,function(e){var t,n,a,r,o,c;e?((t=JSON.parse(e)).playCount,t.playMinutes,document.querySelector(".listencat-notice--add-first"),l?(n=window.location.pathname,a="".concat(n,"?listencat_successfuly_converted=1"),window.location.replace(a)):(r=window.location.pathname,window.location.replace(r))):(o=window.location.pathname,c="".concat(o,"?listencat_unable_to_convert=1"),window.location.replace(c)),i.classList.remove("loading")})})},lictencat_handle_enable_toggle_single_post=function(e,n,a){e.preventDefault();var r=n.parentNode;r.classList.add("loading");var o=n.checked,c=n.parentNode.parentNode;jQuery(document).ready(function(e){var t={action:"listencat_convert_post_ajax",enable:o,id:a};jQuery.post(ajaxurl,t,function(e){var t;e&&((t=JSON.parse(e)).playCount,t.playMinutes,o?(n.checked=!0,c.classList.add("checked")):(n.checked=!1,c.classList.remove("checked"))),r.classList.remove("loading")})})},lictencat_handle_bulk_actions=function(){var e,n,a=document.querySelector("#posts-filter");a&&(e=a.querySelector("#doaction"),n=a.querySelector("#bulk-action-selector-top"),e.addEventListener("click",function(){var e=n.value,t=_toConsumableArray(a.querySelectorAll("#the-list tr")).filter(function(e){return e.querySelector(".check-column input").checked}).map(function(e){return e.querySelector(".column-listencat_enable input")});"listencat_add_audio"===e?_toConsumableArray(t).filter(function(e){return!e.checked}).forEach(function(e){return e.parentNode.classList.add("loading")}):"listencat_remove_audio"===e&&_toConsumableArray(t).filter(function(e){return e.checked}).forEach(function(e){return e.parentNode.classList.add("loading")})}))},listencat_setup_add_first_post_button=function(){var n=document.querySelector("#listencat_add_first_audio");n&&n.addEventListener("click",function(e){var t;e.preventDefault(),n.classList.contains("adding")||(n.innerText="Adding...",n.classList.add("adding"),t={action:"listencat_convert_post_ajax",enable:!0,id:n.dataset.id},jQuery.post(ajaxurl,t,function(e){var t,n;e?(t=updateQueryStringParameter(window.location.href,"listencat_successfuly_converted",1),window.location.replace(t)):(n=updateQueryStringParameter(window.location.href,"listencat_unable_to_convert",1),window.location.replace(n))}))})};window.onload=function(){lictencat_handle_bulk_actions(),listencat_setup_add_first_post_button()};